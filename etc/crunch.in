#!@path_perl@
##
##  crunch -- crunch a Perl script
##  Copyright (c) Ralf S. Engelschall, <rse@engelschall.com>
##
##  Usage: crunch <file >file
##

$readme = $ARGV[0];

$first = <STDIN>;
$first .= <STDIN>;
$first .= <STDIN>;
print $first;
print "\n";
print "## THIS PROGRAM WAS AUTOMATICALLY COMPRESSED!\n";
print "## DO NOT EDIT THIS FILE! CHANGE THE SOURCES!\n";
print "\n";
open(FP, "<$readme");
while (<FP>) {
	print "##  $_";
}
close(FP);
print "\n";

while (<STDIN>) {
	next if m|^\s*$|;
	next if m|^##EOF##$|;
	next if m|^\s*#+\s+.*$|;
	print;
}

##EOF##
